<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Couple's Island Adventure</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #1a2a6c, #b21f1f, #fdbb2d);
            color: #fff;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
        }
        
        .container {
            width: 100%;
            max-width: 1200px;
            display: flex;
            gap: 20px;
            margin-top: 20px;
        }
        
        .game-panel {
            flex: 3;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }
        
        .chat-panel {
            flex: 1;
            display: flex;
            flex-direction: column;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            min-width: 300px;
        }
        
        h1 {
            text-align: center;
            font-size: 2.5rem;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }
        
        h2 {
            font-size: 1.8rem;
            margin-bottom: 15px;
            color: #ffcc00;
        }
        
        p {
            font-size: 1.1rem;
            margin-bottom: 20px;
            line-height: 1.6;
        }
        
        .scene {
            display: none;
            animation: fadeIn 0.5s ease;
        }
        
        .scene.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .input-group {
            margin-bottom: 20px;
        }
        
        input[type="text"] {
            width: 100%;
            padding: 12px 15px;
            border: none;
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.9);
            font-size: 1rem;
            margin: 8px 0;
        }
        
        .checkbox-group {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            margin: 20px 0;
        }
        
        .checkbox-item {
            display: flex;
            align-items: center;
            padding: 12px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            transition: all 0.3s;
        }
        
        .checkbox-item:hover {
            background: rgba(255, 255, 255, 0.2);
        }
        
        .checkbox-item input {
            margin-right: 10px;
            width: 18px;
            height: 18px;
        }
        
        button {
            background: #ff6b6b;
            color: white;
            border: none;
            padding: 12px 25px;
            margin: 10px 5px;
            cursor: pointer;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.3s;
        }
        
        button:hover {
            background: #ff5252;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }
        
        .decision-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin: 20px 0;
        }
        
        .decision-btn {
            flex: 1;
            min-width: 200px;
            text-align: left;
            padding: 15px;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            border: 2px solid rgba(255, 255, 255, 0.3);
        }
        
        .decision-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            border-color: rgba(255, 255, 255, 0.5);
        }
        
        #result {
            padding: 15px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            margin: 20px 0;
            border-left: 4px solid #ffcc00;
        }
        
        .chat-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .chat-box {
            flex: 1;
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
            overflow-y: auto;
            max-height: 400px;
            background: rgba(0, 0, 0, 0.2);
        }
        
        .message {
            margin-bottom: 10px;
            padding: 8px 12px;
            border-radius: 8px;
            max-width: 80%;
            word-wrap: break-word;
        }
        
        .message.partner {
            background: rgba(59, 130, 246, 0.3);
            align-self: flex-start;
        }
        
        .message.self {
            background: rgba(163, 230, 53, 0.3);
            align-self: flex-end;
            margin-left: auto;
        }
        
        .message.system {
            background: rgba(255, 255, 255, 0.1);
            text-align: center;
            font-style: italic;
        }
        
        .chat-input {
            display: flex;
            gap: 10px;
        }
        
        .chat-input input {
            flex: 1;
            padding: 10px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.1);
            color: white;
        }
        
        .chat-input input::placeholder {
            color: rgba(255, 255, 255, 0.6);
        }
        
        .voice-controls {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 15px;
        }
        
        .voice-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 10px;
            border-radius: 50%;
            width: 50px;
            height: 50px;
        }
        
        .mic-btn {
            background: #4CAF50;
        }
        
        .mic-btn.recording {
            background: #ff4757;
            animation: pulse 1.5s infinite;
        }
        
        .play-btn {
            background: #3498db;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
        
        .compatibility-meter {
            height: 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            margin: 20px 0;
            overflow: hidden;
        }
        
        .compatibility-fill {
            height: 100%;
            background: linear-gradient(to right, #4CAF50, #8BC34A);
            border-radius: 10px;
            transition: width 1s ease-in-out;
        }
        
        @media (max-width: 900px) {
            .container {
                flex-direction: column;
            }
            
            .chat-panel {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <h1>Island Survival Adventure ‚ù§Ô∏è</h1>
    
    <div class="container">
        <div class="game-panel">
            <!-- Phase 1: Select Partner -->
            <div id="phase1" class="scene active">
                <h2>Welcome to Your Adventure!</h2>
                <p>You and your partner are about to embark on an exciting island survival adventure. Enter your names to begin.</p>
                
                <div class="input-group">
                    <input type="text" id="player1" placeholder="Your Name">
                </div>
                
                <div class="input-group">
                    <input type="text" id="player2" placeholder="Partner's Name">
                </div>
                
                <div style="text-align: center;">
                    <button onclick="startGame()">Begin Adventure</button>
                </div>
            </div>

            <!-- Phase 2: Equipment Selection -->
            <div id="phase2" class="scene">
                <h2>Equipment Selection üéí</h2>
                <p>Choose 5 items to take to the island:</p>
                
                <div class="checkbox-group">
                    <div class="checkbox-item">
                        <input type="checkbox" name="item" value="Rope" id="rope">
                        <label for="rope">Rope (50ft)</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" name="item" value="First-Aid Kit" id="firstaid">
                        <label for="firstaid">First-Aid Kit</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" name="item" value="Knife" id="knife">
                        <label for="knife">Survival Knife</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" name="item" value="Water Bottle" id="water">
                        <label for="water">Water Bottle (1L)</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" name="item" value="Matches" id="matches">
                        <label for="matches">Waterproof Matches</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" name="item" value="Flashlight" id="flashlight">
                        <label for="flashlight">Flashlight</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" name="item" value="Compass" id="compass">
                        <label for="compass">Compass</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" name="item" value="Blanket" id="blanket">
                        <label for="blanket">Emergency Blanket</label>
                    </div>
                </div>
                
                <div style="text-align: center;">
                    <button onclick="validateItems()">Continue to Adventure</button>
                </div>
            </div>

            <!-- Phase 3: Adventure Scenes -->
            <div id="phase3" class="scene">
                <h2 id="scene-title">Scene 1: The Lion Encounter ü¶Å</h2>
                <p id="scene-desc">As you explore the jungle, a lion appears on the path ahead. It hasn't noticed you yet. What do you do?</p>
                
                <div class="decision-buttons">
                    <button class="decision-btn" onclick="makeDecision('A')">A) Slowly back away without making eye contact</button>
                    <button class="decision-btn" onclick="makeDecision('B')">B) Make yourself look bigger and make loud noises</button>
                    <button class="decision-btn" onclick="makeDecision('C')">C) Climb a nearby tree to safety</button>
                    <button class="decision-btn" onclick="makeDecision('D')">D) Use your supplies to create a distraction</button>
                </div>
                
                <div id="result"></div>
                
                <div class="compatibility-meter">
                    <div class="compatibility-fill" id="compatibility-fill" style="width: 0%"></div>
                </div>
            </div>
        </div>
        
        <div class="chat-panel">
            <div class="chat-header">
                <h3>Discussion Channel</h3>
                <span>üí¨</span>
            </div>
            
            <div class="chat-box" id="chat-box">
                <div class="message system">Welcome! Discuss your choices with your partner.</div>
            </div>
            
            <div class="chat-input">
                <input type="text" id="chat-input" placeholder="Type your message...">
                <button onclick="sendMessage()">Send</button>
            </div>
            
            <div class="voice-controls">
                <button class="voice-btn mic-btn" id="mic-btn" onclick="toggleVoiceRecording()">üé§</button>
                <button class="voice-btn play-btn" onclick="playLastMessage()">‚ñ∂Ô∏è</button>
            </div>
        </div>
    </div>

    <script>
        // Game state variables
        let player1 = { name: "", avatar: "" };
        let player2 = { name: "", avatar: "" };
        let selectedItems = [];
        let decisions = [];
        let currentScene = 0;
        let compatibilityScore = 50;
        let recognition;
        let isRecording = false;
        let chatMessages = [];
        
        // Adventure scenes data
        const scenes = [
            {
                title: "Scene 1: The Lion Encounter ü¶Å",
                description: "As you explore the jungle, a lion appears on the path ahead. It hasn't noticed you yet. What do you do?",
                options: [
                    "A) Slowly back away without making eye contact",
                    "B) Make yourself look bigger and make loud noises",
                    "C) Climb a nearby tree to safety",
                    "D) Use your supplies to create a distraction"
                ],
                results: {
                    'A': "Good choice! The lion didn't notice you and you safely retreated.",
                    'B': "The lion was startled but then became aggressive. You had to run!",
                    'C': "You reached safety, but the lion waited at the bottom for hours.",
                    'D': "The distraction worked! The lion investigated the noise while you escaped."
                }
            },
            {
                title: "Scene 2: The Sudden Storm üåßÔ∏è",
                description: "A sudden tropical storm hits the island. The wind is howling and rain is pouring down. What's your plan?",
                options: [
                    "A) Build a shelter using available materials and your supplies",
                    "B) Seek natural shelter like a cave or overhanging rocks",
                    "C) Continue with your plans despite the weather",
                    "D) Find high ground to avoid potential flooding"
                ],
                results: {
                    'A': "Your shelter kept you dry and protected from the wind.",
                    'B': "The cave provided excellent shelter, but watch out for wildlife!",
                    'C': "You got thoroughly soaked and now risk hypothermia.",
                    'D': "Smart thinking! You avoided the flash flood in the valley."
                }
            },
            {
                title: "Scene 3: The Mysterious Cave üï≥Ô∏è",
                description: "You discover a cave that seems to lead deep underground. Strange sounds echo from within. Do you explore it?",
                options: [
                    "A) Venture in carefully with a makeshift torch",
                    "B) Mark the location but continue with your current plans",
                    "C) Send one person in while the other waits outside",
                    "D) Avoid it completely - it seems too dangerous"
                ],
                results: {
                    'A': "You found ancient artifacts and a source of fresh water!",
                    'B': "You may have missed an opportunity, but safety first.",
                    'C': "Not the best idea - teamwork is crucial in survival situations.",
                    'D': "Sometimes caution is the better part of valor."
                }
            }
        ];
        
        // Initialize the game
        function init() {
            // Initialize voice recognition if available
            if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {
                recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
                recognition.continuous = true;
                recognition.interimResults = true;
                
                recognition.onresult = function(event) {
                    let transcript = '';
                    for (let i = event.resultIndex; i < event.results.length; i++) {
                        if (event.results[i].isFinal) {
                            transcript += event.results[i][0].transcript;
                        }
                    }
                    if (transcript) {
                        addMessage(transcript, 'partner');
                    }
                };
                
                recognition.onerror = function(event) {
                    console.error('Speech recognition error', event.error);
                };
            } else {
                document.getElementById('mic-btn').style.display = 'none';
            }
            
            // Allow sending messages with Enter key
            document.getElementById('chat-input').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    sendMessage();
                }
            });
        }
        
        // Start the game
        function startGame() {
            player1.name = document.getElementById("player1").value || "Adventurer 1";
            player2.name = document.getElementById("player2").value || "Adventurer 2";
            
            document.getElementById("phase1").classList.remove("active");
            document.getElementById("phase2").classList.add("active");
            
            // Add welcome message to chat
            addMessage(`Welcome ${player1.name} and ${player2.name}! Discuss which items to bring to the island.`, 'system');
        }
        
        // Validate selected items before proceeding
        function validateItems() {
            const checkboxes = document.querySelectorAll('input[name="item"]:checked');
            selectedItems = Array.from(checkboxes).map(cb => cb.value);
            
            if (selectedItems.length !== 5) {
                alert(`Please select exactly 5 items. You've selected ${selectedItems.length}.`);
                return;
            }
            
            document.getElementById("phase2").classList.remove("active");
            document.getElementById("phase3").classList.add("active");
            
            // Load the first scene
            loadScene(0);
        }
        
        // Load a specific scene
        function loadScene(index) {
            if (index >= scenes.length) {
                endGame();
                return;
            }
            
            currentScene = index;
            const scene = scenes[index];
            
            document.getElementById("scene-title").textContent = scene.title;
            document.getElementById("scene-desc").textContent = scene.description;
            
            const buttonsContainer = document.querySelector(".decision-buttons");
            buttonsContainer.innerHTML = "";
            
            scene.options.forEach((option, i) => {
                const button = document.createElement("button");
                button.className = "decision-btn";
                button.textContent = option;
                button.onclick = () => makeDecision(String.fromCharCode(65 + i));
                buttonsContainer.appendChild(button);
            });
            
            document.getElementById("result").innerHTML = "";
        }
        
        // Make a decision in the current scene
        function makeDecision(choice) {
            const scene = scenes[currentScene];
            const result = scene.results[choice];
            
            // Display result
            document.getElementById("result").innerHTML = `<strong>Result:</strong> ${result}`;
            
            // Add to decisions list
            decisions.push(choice);
            
            // Update compatibility score
            updateCompatibility(choice);
            
            // Move to next scene after a delay
            setTimeout(() => {
                loadScene(currentScene + 1);
            }, 3000);
        }
        
        // Update compatibility based on decisions
        function updateCompatibility(choice) {
            // Simple scoring mechanism
            const points = {
                'A': 5, 'B': 3, 'C': 2, 'D': 4
            };
            
            compatibilityScore = Math.min(100, compatibilityScore + points[choice]);
            
            // Update visual meter
            document.getElementById("compatibility-fill").style.width = `${compatibilityScore}%`;
        }
        
        // End the game and show results
        function endGame() {
            document.getElementById("scene-title").textContent = "Adventure Complete!";
            document.getElementById("scene-desc").textContent = 
                `You've survived the island adventure together! ${player1.name} and ${player2.name}, your compatibility score is:`;
            
            document.querySelector(".decision-buttons").innerHTML = "";
            
            document.getElementById("result").innerHTML = `
                <h3>Adventure Summary</h3>
                <p><strong>Selected Items:</strong> ${selectedItems.join(", ")}</p>
                <p><strong>Decisions Made:</strong> ${decisions.join(" ‚Üí ")}</p>
                <p><strong>Final Compatibility:</strong> ${compatibilityScore}%</p>
                <p>${compatibilityScore >= 80 ? "Amazing! You work great together!" : 
                  compatibilityScore >= 60 ? "Good teamwork! With practice, you'll be even better!" : 
                  "You survived, but could improve your communication!"}</p>
            `;
            
            document.getElementById("compatibility-fill").style.width = `${compatibilityScore}%`;
        }
        
        // Voice recording functions
        function toggleVoiceRecording() {
            if (!recognition) {
                alert("Speech recognition is not supported in your browser.");
                return;
            }
            
            if (isRecording) {
                recognition.stop();
                document.getElementById("mic-btn").classList.remove("recording");
                isRecording = false;
            } else {
                recognition.start();
                document.getElementById("mic-btn").classList.add("recording");
                isRecording = true;
            }
        }
        
        // Play the last message using text-to-speech
        function playLastMessage() {
            if (chatMessages.length === 0) return;
            
            const lastMessage = chatMessages[chatMessages.length - 1];
            const utterance = new SpeechSynthesisUtterance(lastMessage);
            window.speechSynthesis.speak(utterance);
        }
        
        // Chat functions
        function sendMessage() {
            const input = document.getElementById("chat-input");
            const message = input.value.trim();
            
            if (message) {
                addMessage(message, 'self');
                input.value = "";
                
                // Simulate partner response after a delay
                setTimeout(() => {
                    const responses = [
                        "What do you think we should choose?",
                        "I'm not sure about that option.",
                        "That sounds like a good plan!",
                        "Maybe we should consider the other options?",
                        "I trust your judgment on this."
                    ];
                    const randomResponse = responses[Math.floor(Math.random() * responses.length)];
                    addMessage(randomResponse, 'partner');
                }, 1000 + Math.random() * 2000);
            }
        }
        
        function addMessage(text, type) {
            const chatBox = document.getElementById("chat-box");
            const messageDiv = document.createElement("div");
            messageDiv.className = `message ${type}`;
            messageDiv.textContent = text;
            chatBox.appendChild(messageDiv);
            chatBox.scrollTop = chatBox.scrollHeight;
            
            // Store message for playback
            if (type !== 'system') {
                chatMessages.push(text);
            }
        }
        
        // Initialize the game when page loads
        window.onload = init;
    </script>
</body>
</html>
